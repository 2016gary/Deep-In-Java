# MySQL

# 1.MySQL体系结构
### 数据库产品的架构一般可以分为应用层、逻辑层、物理层

<img src="./Images/MySQL.png" alt="无法显示该图片"/>

## 应用层
### Connection Pool可以理解为应用层，负责和客户端、用户进行交互，需要和不同的客户端（PHP,Java,C API,.Net以及ODBC,JDBC等）和中间服务器进行交互，这一层主要完成的是链接处理，授权认证，和安全等一些功能，连接到MySQL的客户端在其进程中，都会有一个独立的线程，连接的查询只会在这个登录线程中进行查询。

## 逻辑层
### Management Services&Utilities、SQL Interface、Parser、Optimizer、Caches&Buffers、Pluggable Storage Engines可以理解为数据库的大脑——逻辑层。负责具体的查询处理、事务处理、存储管理、恢复管理，以及其他附加功能。查询处理器负责查询的解析、执行。当接收到客户端的查询时，数据库会分配一个线程来处理它。先用查询处理器（优化器）生成执行计划，然后交由计划执行器来执行，执行器有时需要访问更底层的事务管理器、存储管理器来操作数据，事务管理器、存储管理器主要负责事务控制、并发控制、存储管理。在其中，将由事务管理来保证“ACID”特性，通过锁管理器来控制并发，由日志管理器来确保数据持久化，存储管理器一般还包括一个缓冲管理器，用它来确定磁盘和缓存之间的数据传输。

## 物理层
### MySQL的存储引擎，MySQL提供出了存储引擎接口，第三方可以根据自己的业务逻辑需求开发自己的存储引擎，Innodb起初就是由Innobase Oy公司所开发，2006年5月被甲骨文公司并购。服务器通过API与存储引擎通信，这些接口屏蔽了不同存储引擎之间的差异，使得这些差异对上层的查询过程透明。存储引擎API包含几十个底层函数，用于执行诸如“开始一个事务”或者“根据主键提取一行记录”等操作，但存储引擎不会去解析SQL，不同存储引擎之间也不会相互通信，而只是简单地相应上层和服务的请求。存储引擎是针对于表的而不是针对于库的，不同的表可以使用不同的引擎。最下方的Files&Logs是实际物理磁盘（存储）上的数据库文件，比如数据文件、日志文件等等。



